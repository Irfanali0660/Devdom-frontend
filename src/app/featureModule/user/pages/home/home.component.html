<div class="tagbox flex-container items-between"> 
    <div  *ngFor="let details of tagdetailsData" class="tag shadow-md m-2 p-2 rounded-md">
        <p class="text-xl text-center  font-medium">{{details.title | uppercase}}</p>
        <div (click)="getsingletag(details._id)" class="flex  items-center justify-evenly   cursor-pointer" >
            <img [src]="'http://localhost:4000/images/'+details.image" alt="Tag images" style="width: 10vh ; height: fit-content;">
            <p class="text-justify px-2">
                {{details.description}}</p>
        </div>
    </div>
</div>
<div class="flex justify-end px-5 m-4">
    <button class="pl-3  text-gray-900  font-medium">Show more<i class="fa-solid fa-arrow-right"></i>
    </button>
</div>




<main class=" lg:pb-24 bg-white ">    
<div *ngIf="postload$ | async" class=" flex justify-start flex-col px-4 mx-auto max-w-screen-xl " >
    <div role="status" class="px-4 border border-gray-200 rounded shadow-md animate-pulse max-w-screen-lg mt-3 ml-12 p-4" style="width: 60% !important;">
        <div class="flex items-center mt-4 space-x-3">
            <svg class="text-gray-200 w-14 h-17 " aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"></path></svg>
            <div>
                <div class="h-2.5 bg-gray-200 rounded-full  w-32 mb-2"></div>
                <div class="w-48 h-2 bg-gray-200 rounded-full "></div>
            </div>
        </div>
        <div class="flex items-center justify-center h-48 mb-4 bg-gray-300 rounded mt-1 ">
            <svg class="w-12 h-12 text-gray-200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" viewBox="0 0 640 512"><path d="M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"/></svg>
        </div>
        <div class="h-2.5 bg-gray-200 rounded-full  w-48 mb-4"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full "></div>
   
        <span class="sr-only">Loading...</span>
    </div>
    <div role="status" class="px-4 border border-gray-200 rounded shadow-md animate-pulse max-w-screen-lg mt-3 ml-12 p-4" style="width: 60% !important;">
        <div class="flex items-center mt-4 space-x-3">
            <svg class="text-gray-200 w-14 h-17 " aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"></path></svg>
            <div>
                <div class="h-2.5 bg-gray-200 rounded-full  w-32 mb-2"></div>
                <div class="w-48 h-2 bg-gray-200 rounded-full "></div>
            </div>
        </div>
        <div class="flex items-center justify-center h-48 mb-4 bg-gray-300 rounded mt-1 ">
            <svg class="w-12 h-12 text-gray-200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" viewBox="0 0 640 512"><path d="M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"/></svg>
        </div>
        <div class="h-2.5 bg-gray-200 rounded-full  w-48 mb-4"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full  mb-2.5"></div>
        <div class="h-2 bg-gray-200 rounded-full "></div>
   
        <span class="sr-only">Loading...</span>
    </div>
</div>  



    <div *ngFor="let post of postdetails" class=" flex justify-start flex-row px-4 mx-auto max-w-screen-xl mt-3" >  
        <article  class="shadow-md p-4 mx-auto w-full cursor-pointer format format-sm sm:format-base lg:format-lg format-blue  text-justify border border-gray-400" style="width: 60% !important;">
            <div class="flex justify-between">
                <div>
                    <header class="mb-2 lg:mb-4 not-format ">
                        <address class="flex items-center mb-6 not-italic ">
                            <div class="inline-flex items-center mr-3 text-sm text-gray-900  ">
                                <img *ngIf="post.userId.image || post.userId.googleimage image" (click)="popover(post._id)" class="mr-4 w-12 h-12 rounded-full" [src]="post.userId.googleimage ? post.userId.googleimage : 'http://localhost:4000/images/'+post.userId?.image" alt="image"> 
                                <ng-template #image>
                                    <img (click)="popover(post._id)" class="mr-4 w-12 h-12 rounded-full" src="https://www.pngmart.com/files/22/User-Avatar-Profile-Background-Isolated-PNG.png" alt="">
                                </ng-template>
                                <div>
                                    <a href="#" rel="author" class="text-xl font-bold text-gray-900 ">{{post.userId.userName}}</a>
                                    <!-- <p class="text-base font-light text-gray-500 ">Graphic Designer, educator & CEO Flowbite</p> -->
                                    <p class="text-base font-light text-gray-500 "><time  >{{getDate(post.date)}}</time></p>
                                </div>
                            </div>
                        </address>
                    </header>
                </div>
                
                <div>
                    <button (click)="dropclick(post._id)"  class="inline-flex items-center p-2 text-sm font-medium text-center text-gray-900 bg-white rounded-lg hover:bg-gray-100 " type="button"> 
                        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path></svg>
                      </button>
                      <!-- Dropdown menu -->
                      <div  class="absolute bg-white border border-gray-200" *ngIf="menutoggle && post._id==id" >
                          <ul class="py-2 text-sm text-gray-700 " >
                            <li>
                              <a (click)="modelclick()" class="block px-4 py-2 hover:bg-gray-100 text-red-600 font-medium flex flex-row"><svg width="20px" height="20px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#adadad"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.048"></g><g id="SVGRepo_iconCarrier"> <g id="Navigation / Flag"> <path id="Vector" d="M4 21V15.6871M4 15.6871C9.81818 11.1377 14.1818 20.2363 20 15.6869V4.31347C14.1818 8.86284 9.81818 -0.236103 4 4.31327V15.6871Z" stroke="#545454" stroke-width="1.392" stroke-linecap="round" stroke-linejoin="round"></path> </g> </g></svg> Report</a>
                            </li>
                            <li>
                              <a  class="block px-4 py-2 hover:bg-gray-100 ">Settings</a>
                            </li>
                            <li>
                              <a  class="block px-4 py-2 hover:bg-gray-100 ">Earnings</a>
                            </li>
                          </ul>
                          <div class="py-2">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100  ">Separated link</a>
                          </div>
                      </div>
                </div>
            </div>
            <div *ngIf="popoveruser && post._id==id" class="absolute z-10 bg-white rounded border border-gray-200 w-64 text-sm text-gray-500 transition-opacity duration-300 ">
              <div class="p-3" >
                  <div class="flex items-center justify-between mb-2">
                      <a href="#">
                          <img class="w-10 h-10 rounded-full" [src]="post.userId.image">
                      </a>
                      <div>
                          <button  type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-xs px-3 py-1.5 focus:outline-none ">Connect</button>
                      </div>
                  </div>
                  <p class="text-base font-semibold leading-none text-gray-900 ">
                     {{post.userId.userName}}
                  </p>
                  <p class="mb-3 text-sm font-normal">
                      <a href="#" class="hover:underline"> {{post.userId.email}}</a>
                  </p>
                  <p class="mb-4 text-sm">Open-source contributor. Building <a href="#" class="text-blue-600 "></a>.</p>
                  <ul class="flex text-sm">
                      <li class="mr-2">
                          <a href="#" class="hover:underline">
                              <span class="font-semibold text-gray-900 ">799</span>
                              <span>Following</span>
                          </a>
                      </li>
                      <li>
                          <a href="#" class="hover:underline">
                              <span class="font-semibold text-gray-900 ">3,758</span>
                              <span>Followers</span>
                          </a>
                      </li>
                  </ul>
              </div>
          </div>
            <div routerLink="/singlepost/{{post._id}}">
              
                <div  class="flex justify-center mb-6" > 
                    <img  [src]="'http://localhost:4000/images/'+post.image" alt="">
                </div>
                   
                <p>
                    <span class="text-gray-400" *ngFor="let tag of post.tag">#{{tag.title}}&nbsp;</span>
                </p>
                <p class="content" [innerHTML]="post.post"></p>
                <!-- <p class="mt-2 font-medium">{{post.tag}}</p> -->
            </div> 
        </article>
        <div style="width: 30% !important;"> 
        </div>
    </div>
</main>


<div *ngIf="model" class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">'
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
    <div class="fixed inset-0 z-10 overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
          <div class="bg-white px-4 pb-4  sm:p-6 sm:pb-4">
            <div class="flex  justify-start">
              <!-- <div class="mx-auto flex  flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"> -->
              
              <!-- </div> -->
              <div class="mt-3 text-center sm:ml-4 sm:mt-0 flex flex-row mx-3">
                <svg class="h-6 w-6 text-red-600 " fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                  </svg>
                <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Why are you reporting this Post</h3>
              </div>
            </div>
          </div>
          <div class="flex flex-col mx-10">
           
            <div class="flex items-center mr-4">
                <input formControlName="reportissue" id="red-radio" type="radio" value="It's spam"  class=" border border-red-700 ">
                <label for="red-radio" class="ml-2 text-sm font-medium text-gray-900 ">It's spam</label>
            </div><div class="flex items-center mr-4">
                <input formControlName="reportissue" id="red-radio1" type="radio" value="False information"  class="border border-red-700">
                <label for="red-radio1" class="ml-2 text-sm font-medium text-gray-900 ">False information</label>
            </div><div  class="flex items-center mr-4">
                <input formControlName="reportissue" id="red-radio2" type="radio" value="violence or dabgerous organisations"  class="border border-red-700">
                <label for="red-radio2" class="ml-2 text-sm font-medium text-gray-900 ">violence or dabgerous organisations</label>
            </div><div class="flex items-center mr-4">
                <input formControlName="reportissue" id="red-radio3" type="radio" value="Hate speech or symbols"  class="border border-red-700 select:bg-red-600"> 
                <label for="red-radio3" class="ml-2 text-sm font-medium text-gray-900 ">Hate speech or symbols</label>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
            <button type="submit" class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto">Report</button>
            <button type="button" class=" inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" (click)="model=!model">Cancel</button>
          </div>
        </div>
    </div>
</div>
  </div>
  